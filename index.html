<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex,nofollow,noarchive">
    <title>STAR MASTER</title>
    <style>
        body {
            margin: 0; padding: 0;
            font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
            background-image: url('image/background.png');
            background-size: cover; background-position: center; background-attachment: fixed;
            color: #fff; display: flex; justify-content: center; align-items: flex-start; /* ä¸Šå¯„ã›ã«å¤‰æ›´ */
            height: 100vh; overflow: hidden;
        }
        #game-screen {
            background: rgba(0, 5, 30, 0.82); backdrop-filter: blur(8px);
            width: 85%; max-width: 800px; 
            margin-top: 17vh; /* ä¸Šã‹ã‚‰å°‘ã—ã ã‘é›¢ã™ï¼ˆå­ä¾›ãŸã¡ã‚’é¿ã‘ã‚‹ï¼‰ */
            padding: 30px;
            border: 4px solid #fff; box-shadow: 12px 12px 0px #000;
            text-align: center; position: relative; box-sizing: border-box;
        }
        h1 { font-size: 2.5rem; color: #ffeb3b; margin: 0 0 20px 0; text-shadow: 3px 3px 0px #000; }
        
        /* ãƒœã‚¿ãƒ³æ–‡å­—ã‚’å¤§ãã */
        .btn {
            background: #2196F3; color: white; border: 3px solid #fff;
            padding: 15px 10px; margin: 8px; cursor: pointer; font-weight: bold;
            box-shadow: 5px 5px 0px #000; font-size: 22px; /* æ‹¡å¤§ */
            width: 100%; max-width: 340px; transition: 0.1s;
        }
        .btn:hover { background: #64B5F6; transform: translate(-2px, -2px); box-shadow: 7px 7px 0px #000; }
        .btn:active { transform: translate(2px, 2px); box-shadow: 0px 0px 0px #000; }
        
        .reset-btn { position: fixed; bottom: 20px; left: 20px; background: #f44336; width: auto; font-size: 14px; display: none; z-index: 100; }
        
        #status-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; font-size: 1.4rem; color: #00d4ff; border-bottom: 2px solid #334; padding-bottom: 10px; }
        
        /* é¸æŠè‚¢ã‚’æŠ¼ã—ã‚„ã™ã */
        .choices { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 15px; justify-items: center; }
        .hidden { display: none !important; }
        
        /* å•é¡Œæ–‡ã‚’å¤§ãããƒ»æ ã‚’ã‚¹ãƒªãƒ ã« */
        #question { 
            min-height: 90px; display: flex; align-items: center; justify-content: center; 
            font-size: 1.8rem; /* æ‹¡å¤§ */
            line-height: 1.4; font-weight: bold; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 10px;
        }
        
        input, select { padding: 12px; font-size: 18px; border: none; margin: 10px 0; border-radius: 5px; text-align: center; }
        #ranking-list { text-align: left; background: rgba(0,0,0,0.4); padding: 15px; height: 140px; overflow-y: auto; font-size: 16px; margin-top: 10px; border: 1px solid #445; }
        #lives-display { color: #ff4081; font-size: 1.8rem; }
    </style>
</head>
<body>

<button id="global-reset" class="btn reset-btn" onclick="location.reload()">ã€ã¯ã˜ã‚ã«ã‚‚ã©ã‚‹ã€‘</button>

<div id="game-screen">
    <div id="password-panel">
        <h1>ğŸ” ACCESS</h1>
        <p>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
        <input type="password" id="input-pass" placeholder="Password"><br>
        <button class="btn" onclick="checkPassword()">ENTER</button>
    </div>

    <div id="start-panel" class="hidden">
        <h1>âœ¨ STAR MASTER</h1>
        <input type="text" id="player-name" placeholder="ãªã¾ãˆã‚’ã„ã‚Œã¦ã­" maxlength="10"><br>
        <div style="margin: 10px 0;">
            BGM: <select id="bgm-select"><option value="none">ãªã—</option><option value="bgm1">BGM1</option><option value="bgm2">BGM2</option></select>
        </div>
        <button class="btn" onclick="initGame()">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
    </div>

    <div id="quiz-panel" class="hidden">
        <div id="status-bar">
            <div>â± <span id="timer">0.0</span>s</div>
            <div id="lives-display">â¤ï¸â¤ï¸</div>
            <div>SCORE: <span id="score">0</span>/50</div>
        </div>
        <div id="question">Loading...</div>
        <div class="choices" id="choices"></div>
    </div>

    <div id="result-panel" class="hidden">
        <h2 id="finish-msg">RESULT</h2>
        <p style="font-size: 1.6rem;">ã‚¹ã‚³ã‚¢: <span id="final-score">0</span>ç‚¹ / ã‚¿ã‚¤ãƒ : <span id="final-time">0</span>ç§’</p>
        <div id="ranking-list"></div>
        <button class="btn" onclick="location.reload()">ã‚‚ã†ã„ã¡ã©éŠã¶</button>
    </div>
</div>

<audio id="audio-bgm1" src="sound/bgm1.mp3" loop></audio>
<audio id="audio-bgm2" src="sound/bgm2.mp3" loop></audio>
<audio id="audio-correct" src="sound/correct.mp3"></audio>
<audio id="audio-wrong" src="sound/wrong.mp3"></audio>
<audio id="audio-gameover" src="sound/gameover.mp3"></audio>

<script>
    const CORRECT_PASSWORD = "103"; 
    const allQuizData = [
        { q: "å¤ã®å¤§ä¸‰è§’ï¼šã“ã¨åº§ã®1ç­‰æ˜Ÿã¯ï¼Ÿ", c: ["ãƒ™ã‚¬", "ãƒ‡ãƒãƒ–", "ã‚¢ãƒ«ã‚¿ã‚¤ãƒ«", "ã‚¢ãƒ³ã‚¿ãƒ¬ã‚¹"], a: "ãƒ™ã‚¬" },
        { q: "å¤ã®å¤§ä¸‰è§’ï¼šã‚ã—åº§ã®1ç­‰æ˜Ÿã¯ï¼Ÿ", c: ["ã‚¢ãƒ«ã‚¿ã‚¤ãƒ«", "ãƒ™ã‚¬", "ãƒ‡ãƒãƒ–", "ã‚¹ãƒ”ã‚«"], a: "ã‚¢ãƒ«ã‚¿ã‚¤ãƒ«" },
        { q: "å¤ã®å¤§ä¸‰è§’ï¼šã¯ãã¡ã‚‡ã†åº§ã®1ç­‰æ˜Ÿã¯ï¼Ÿ", c: ["ãƒ‡ãƒãƒ–", "ãƒ™ã‚¬", "ã‚¢ãƒ«ã‚¿ã‚¤ãƒ«", "ã‚·ãƒªã‚¦ã‚¹"], a: "ãƒ‡ãƒãƒ–" },
        { q: "å†¬ã®å¤§ä¸‰è§’ï¼šãŠãŠã„ã¬åº§ã®1ç­‰æ˜Ÿã¯ï¼Ÿ", c: ["ã‚·ãƒªã‚¦ã‚¹", "ãƒ—ãƒ­ã‚­ã‚ªãƒ³", "ãƒ™ãƒ†ãƒ«ã‚®ã‚¦ã‚¹", "ãƒªã‚²ãƒ«"], a: "ã‚·ãƒªã‚¦ã‚¹" },
        { q: "å†¬ã®å¤§ä¸‰è§’ï¼šã“ã„ã¬åº§ã®1ç­‰æ˜Ÿã¯ï¼Ÿ", c: ["ãƒ—ãƒ­ã‚­ã‚ªãƒ³", "ã‚·ãƒªã‚¦ã‚¹", "ãƒ™ãƒ†ãƒ«ã‚®ã‚¦ã‚¹", "ã‚«ãƒãƒ¼ãƒ—ã‚¹"], a: "ãƒ—ãƒ­ã‚­ã‚ªãƒ³" },
        { q: "å†¬ã®å¤§ä¸‰è§’ï¼šã‚ªãƒªã‚ªãƒ³åº§ã«ã‚ã‚‹èµ¤ã„æ˜Ÿã¯ï¼Ÿ", c: ["ãƒ™ãƒ†ãƒ«ã‚®ã‚¦ã‚¹", "ãƒªã‚²ãƒ«", "ãƒ—ãƒ­ã‚­ã‚ªãƒ³", "ã‚·ãƒªã‚¦ã‚¹"], a: "ãƒ™ãƒ†ãƒ«ã‚®ã‚¦ã‚¹" },
        { q: "ã‚ªãƒªã‚ªãƒ³åº§ã«ã‚ã‚‹ç™½ã„æ˜Ÿï¼ˆè¶³å´ï¼‰ã®åå‰ã¯ï¼Ÿ", c: ["ãƒªã‚²ãƒ«", "ãƒ™ãƒ†ãƒ«ã‚®ã‚¦ã‚¹", "ãƒ—ãƒ­ã‚­ã‚ªãƒ³", "ã‚·ãƒªã‚¦ã‚¹"], a: "ãƒªã‚²ãƒ«" },
        { q: "æ˜¥ã®å¤§ä¸‰è§’ï¼šã†ã—ã‹ã„åº§ã®1ç­‰æ˜Ÿã¯ï¼Ÿ", c: ["ã‚¢ãƒ¼ã‚¯ãƒˆã‚¥ãƒ«ã‚¹", "ã‚¹ãƒ”ã‚«", "ãƒ‡ãƒãƒœãƒ©", "ãƒ¬ã‚°ãƒ«ã‚¹"], a: "ã‚¢ãƒ¼ã‚¯ãƒˆã‚¥ãƒ«ã‚¹" },
        { q: "æ˜¥ã®å¤§ä¸‰è§’ï¼šãŠã¨ã‚åº§ã®1ç­‰æ˜Ÿã¯ï¼Ÿ", c: ["ã‚¹ãƒ”ã‚«", "ã‚¢ãƒ¼ã‚¯ãƒˆã‚¥ãƒ«ã‚¹", "ãƒ‡ãƒãƒœãƒ©", "ãƒ—ãƒ­ã‚­ã‚ªãƒ³"], a: "ã‚¹ãƒ”ã‚«" },
        { q: "æ˜¥ã®å¤§ä¸‰è§’ï¼šã—ã—åº§ã®ã—ã£ã½ã«ã‚ã‚‹2ç­‰æ˜Ÿã¯ï¼Ÿ", c: ["ãƒ‡ãƒãƒœãƒ©", "ã‚¹ãƒ”ã‚«", "ã‚¢ãƒ¼ã‚¯ãƒˆã‚¥ãƒ«ã‚¹", "ãƒ¬ã‚°ãƒ«ã‚¹"], a: "ãƒ‡ãƒãƒœãƒ©" },
        { q: "ã—ã—åº§ã®èƒ¸ã«è¼ã1ç­‰æ˜Ÿã¯ï¼Ÿ", c: ["ãƒ¬ã‚°ãƒ«ã‚¹", "ã‚¹ãƒ”ã‚«", "ã‚¢ãƒ¼ã‚¯ãƒˆã‚¥ãƒ«ã‚¹", "ãƒ‡ãƒãƒœãƒ©"], a: "ãƒ¬ã‚°ãƒ«ã‚¹" },
        { q: "åŒ—æ¥µæ˜Ÿã¯ä½•åº§ã«å«ã¾ã‚Œã‚‹æ˜Ÿï¼Ÿ", c: ["ã“ãã¾åº§", "ãŠãŠãã¾åº§", "ã‚«ã‚·ã‚ªãƒšãƒ¤åº§", "ã‚±ãƒ•ã‚§ã‚¦ã‚¹åº§"], a: "ã“ãã¾åº§" },
        { q: "åŒ—æ–—ä¸ƒæ˜Ÿã¯ä½•åº§ã®ä¸€éƒ¨ï¼Ÿ", c: ["ãŠãŠãã¾åº§", "ã“ãã¾åº§", "ã‚«ã‚·ã‚ªãƒšãƒ¤åº§", "ã—ã—åº§"], a: "ãŠãŠãã¾åº§" },
        { q: "ã‚«ã‚·ã‚ªãƒšãƒ¤åº§ã¯ã©ã‚“ãªå½¢ã®ä¸¦ã³ï¼Ÿ", c: ["Wã®å½¢", "Mã®å½¢", "Sã®å½¢", "Lã®å½¢"], a: "Wã®å½¢" },
        { q: "åŒ—æ¥µæ˜Ÿã¯1æ—¥ã«ä½•åº¦å‹•ã„ã¦è¦‹ãˆã‚‹ï¼Ÿ", c: ["ã»ã¨ã‚“ã©å‹•ã‹ãªã„", "15åº¦", "30åº¦", "360åº¦"], a: "ã»ã¨ã‚“ã©å‹•ã‹ãªã„" },
        { q: "ã•ãã‚Šåº§ã«ã‚ã‚‹èµ¤ã„1ç­‰æ˜Ÿã¯ï¼Ÿ", c: ["ã‚¢ãƒ³ã‚¿ãƒ¬ã‚¹", "ãƒ™ãƒ†ãƒ«ã‚®ã‚¦ã‚¹", "ç«æ˜Ÿ", "ã‚¢ãƒ«ãƒ‡ãƒãƒ©ãƒ³"], a: "ã‚¢ãƒ³ã‚¿ãƒ¬ã‚¹" },
        { q: "ã€Œç§‹ã®å››è¾ºå½¢ã€ãŒã‚ã‚‹ã®ã¯ä½•ã®æ˜Ÿåº§ï¼Ÿ", c: ["ãƒšã‚¬ã‚¹ã‚¹åº§", "ã‚¢ãƒ³ãƒ‰ãƒ­ãƒ¡ãƒ€åº§", "ã¿ãšãŒã‚åº§", "ã†ãŠåº§"], a: "ãƒšã‚¬ã‚¹ã‚¹åº§" },
        { q: "ãŠã†ã—åº§ã«ã‚ã‚‹èµ¤ã„1ç­‰æ˜Ÿã®åå‰ã¯ï¼Ÿ", c: ["ã‚¢ãƒ«ãƒ‡ãƒãƒ©ãƒ³", "ã‚¢ãƒ³ã‚¿ãƒ¬ã‚¹", "ã‚·ãƒªã‚¦ã‚¹", "ã‚¹ãƒ”ã‚«"], a: "ã‚¢ãƒ«ãƒ‡ãƒãƒ©ãƒ³" },
        { q: "å¤ªé™½ã‚’é™¤ã„ã¦ã€å…¨å¤©ã§æœ€ã‚‚æ˜ã‚‹ã„æ’æ˜Ÿã¯ï¼Ÿ", c: ["ã‚·ãƒªã‚¦ã‚¹", "åŒ—æ¥µæ˜Ÿ", "ãƒ™ã‚¬", "ãƒªã‚²ãƒ«"], a: "ã‚·ãƒªã‚¦ã‚¹" },
        { q: "ã¿ãªã¿ã®ã†ãŠåº§ã®1ç­‰æ˜Ÿï¼ˆç§‹ã®ã²ã¨ã¤æ˜Ÿï¼‰ã¯ï¼Ÿ", c: ["ãƒ•ã‚©ãƒ¼ãƒãƒ«ãƒã‚¦ãƒˆ", "ã‚¢ãƒ³ã‚¿ãƒ¬ã‚¹", "ã‚«ãƒãƒ¼ãƒ—ã‚¹", "ãƒ™ã‚¬"], a: "ãƒ•ã‚©ãƒ¼ãƒãƒ«ãƒã‚¦ãƒˆ" },
        { q: "æ˜Ÿã¯1æ™‚é–“ã«ä½•åº¦å‹•ã„ã¦è¦‹ãˆã‚‹ï¼Ÿ", c: ["15åº¦", "1åº¦", "30åº¦", "45åº¦"], a: "15åº¦" },
        { q: "æ˜Ÿã¯1ãƒ¶æœˆã«ä½•åº¦ï¼ˆåŒã˜æ™‚åˆ»ã«ï¼‰å‹•ã„ã¦è¦‹ãˆã‚‹ï¼Ÿ", c: ["30åº¦", "15åº¦", "1åº¦", "90åº¦"], a: "30åº¦" },
        { q: "è¡¨é¢æ¸©åº¦ãŒæœ€ã‚‚é«˜ã„æ˜Ÿã®è‰²ã¯ï¼Ÿ", c: ["é’ç™½", "ç™½", "é»„", "èµ¤"], a: "é’ç™½" },
        { q: "è¡¨é¢æ¸©åº¦ãŒæœ€ã‚‚ä½ã„æ˜Ÿã®è‰²ã¯ï¼Ÿ", c: ["èµ¤", "é»„", "ç™½", "é’ç™½"], a: "èµ¤" },
        { q: "å¤ªé™½ã®è¡¨é¢æ¸©åº¦ã¯ç´„ä½•åº¦ï¼Ÿ", c: ["6000åº¦", "100ä¸‡åº¦", "1500åº¦", "1500ä¸‡åº¦"], a: "6000åº¦" },
        { q: "åœ°çƒã®è‡ªè»¢ã®å‘ãã¯ã©ã£ã¡ã‹ã‚‰ã©ã£ã¡ï¼Ÿ", c: ["è¥¿ã‹ã‚‰æ±", "æ±ã‹ã‚‰è¥¿", "åŒ—ã‹ã‚‰å—", "å—ã‹ã‚‰åŒ—"], a: "è¥¿ã‹ã‚‰æ±" },
        { q: "è¦³æ¸¬åœ°ã®åŒ—ç·¯ã¨ã€ãã®å ´æ‰€ã‹ã‚‰è¦‹ãŸåŒ—æ¥µæ˜Ÿã®ä½•ãŒç­‰ã—ã„ï¼Ÿ", c: ["é«˜åº¦", "æ–¹ä½", "æ˜ã‚‹ã•", "å—ä¸­æ™‚åˆ»"], a: "é«˜åº¦" },
        { q: "åŒ—åŠçƒã§ã€å—ã®ç©ºã®æ˜Ÿã¯ã©ã£ã¡ã‹ã‚‰ã©ã£ã¡ã«å‹•ãï¼Ÿ", c: ["æ±ã‹ã‚‰è¥¿", "è¥¿ã‹ã‚‰æ±", "åŒ—ã‹ã‚‰å—", "çœŸä¸Šã¸"], a: "æ±ã‹ã‚‰è¥¿" },
        { q: "å†¬ã®å¤œç©ºã§è¦‹ãˆã‚‹é’ç™½ã„1ç­‰æ˜Ÿï¼ˆã‚ªãƒªã‚ªãƒ³åº§ï¼‰ã¯ï¼Ÿ", c: ["ãƒªã‚²ãƒ«", "ãƒ™ãƒ†ãƒ«ã‚®ã‚¦ã‚¹", "ã‚¢ãƒ³ã‚¿ãƒ¬ã‚¹", "ã‚¢ãƒ«ãƒ‡ãƒãƒ©ãƒ³"], a: "ãƒªã‚²ãƒ«" },
        { q: "ã‚ªãƒªã‚ªãƒ³åº§ã®çœŸã‚“ä¸­ã«ä¸¦ã¶ä¸‰ã¤æ˜Ÿã¯ã„ãã¤ï¼Ÿ", c: ["3ã¤", "5ã¤", "7ã¤", "2ã¤"], a: "3ã¤" },
        { q: "åŒ—æ–—ä¸ƒæ˜Ÿã‹ã‚‰åŒ—æ¥µæ˜Ÿã‚’æ¢ã™ã¨ãã€å…ˆç«¯ã®å¹…ã®ä½•å€ä¼¸ã°ã™ï¼Ÿ", c: ["5å€", "3å€", "10å€", "7å€"], a: "5å€" },
        { q: "äºŒåå››ç¯€æ°—ã§ã€æ˜¼ãŒæœ€ã‚‚é•·ã„æ—¥ã¯ï¼Ÿ", c: ["å¤è‡³", "å†¬è‡³", "æ˜¥åˆ†", "ç§‹åˆ†"], a: "å¤è‡³" },
        { q: "å¤ã®å¤§ä¸‰è§’ã‚’æ§‹æˆã™ã‚‹æ˜Ÿåº§ã§ãªã„ã®ã¯ã©ã‚Œï¼Ÿ", c: ["ã•ãã‚Šåº§", "ã“ã¨åº§", "ã‚ã—åº§", "ã¯ãã¡ã‚‡ã†åº§"], a: "ã•ãã‚Šåº§" },
        { q: "1ç­‰æ˜Ÿã‚ˆã‚Šã‚‚æ˜ã‚‹ã„æ˜Ÿã®ç­‰ç´šã¯ï¼Ÿ", c: ["0ç­‰æ˜Ÿ", "2ç­‰æ˜Ÿ", "6ç­‰æ˜Ÿ", "ãƒã‚¤ãƒŠã‚¹"], a: "0ç­‰æ˜Ÿ" },
        { q: "è‚‰çœ¼ã§è¦‹ãˆã‚‹æœ€ã‚‚æš—ã„æ˜Ÿã¯ä½•ç­‰æ˜Ÿï¼Ÿ", c: ["6ç­‰æ˜Ÿ", "1ç­‰æ˜Ÿ", "10ç­‰æ˜Ÿ", "3ç­‰æ˜Ÿ"], a: "6ç­‰æ˜Ÿ" },
        { q: "ç­‰ç´šãŒ1ã¤ä¸ŠãŒã‚‹ã¨ã€æ˜ã‚‹ã•ã¯ç´„ä½•å€ã«ãªã‚‹ï¼Ÿ", c: ["2.5å€", "10å€", "100å€", "5å€"], a: "2.5å€" },
        { q: "ç­‰ç´šãŒ5ã¤é•ã†ã¨ã€æ˜ã‚‹ã•ã¯ä½•å€é•ã†ï¼Ÿ", c: ["100å€", "50å€", "10å€", "5å€"], a: "100å€" },
        { q: "å¤ªé™½ãŒçœŸå—ã«ãã‚‹ã“ã¨ã‚’ä½•ã¨ã„ã†ï¼Ÿ", c: ["å—ä¸­", "åŒ—ä¸Š", "æ—¥ã®å‡º", "æ—¥æ²¡"], a: "å—ä¸­" },
        { q: "1å¹´ä¸­åœ°å¹³ç·šã®ä¸‹ã«æ²ˆã¾ãªã„æ˜Ÿã‚’ä½•ã¨ã„ã†ï¼Ÿ", c: ["å‘¨æ¥µæ˜Ÿ", "æ’æ˜Ÿ", "æƒ‘æ˜Ÿ", "å½—æ˜Ÿ"], a: "å‘¨æ¥µæ˜Ÿ" },
        { q: "å¤©çƒä¸Šã§å¤ªé™½ãŒ1å¹´ã‹ã‘ã¦é€šã‚‹é“ã®åå‰ã¯ï¼Ÿ", c: ["é»„é“", "èµ¤é“", "ç™½é“", "éŠ€æ²³"], a: "é»„é“" },
        { q: "é»„é“12æ˜Ÿåº§ã«å«ã¾ã‚Œãªã„æ˜Ÿåº§ã¯ï¼Ÿ", c: ["ã‚ªãƒªã‚ªãƒ³åº§", "ãŠã²ã¤ã˜åº§", "ã—ã—åº§", "ã•ãã‚Šåº§"], a: "ã‚ªãƒªã‚ªãƒ³åº§" },
        { q: "ä¸ƒå¤•ã®ã€Œç¹”å§«ï¼ˆãŠã‚Šã²ã‚ï¼‰ã€ã«ã‚ãŸã‚‹æ˜Ÿã¯ï¼Ÿ", c: ["ãƒ™ã‚¬", "ã‚¢ãƒ«ã‚¿ã‚¤ãƒ«", "ãƒ‡ãƒãƒ–", "ã‚¹ãƒ”ã‚«"], a: "ãƒ™ã‚¬" },
        { q: "ä¸ƒå¤•ã®ã€Œå½¦æ˜Ÿï¼ˆã²ã“ã¼ã—ï¼‰ã€ã«ã‚ãŸã‚‹æ˜Ÿã¯ï¼Ÿ", c: ["ã‚¢ãƒ«ã‚¿ã‚¤ãƒ«", "ãƒ™ã‚¬", "ãƒ‡ãƒãƒ–", "ã‚¹ãƒ”ã‚«"], a: "ã‚¢ãƒ«ã‚¿ã‚¤ãƒ«" },
        { q: "åŒ—æ¥µæ˜Ÿã®é«˜åº¦ãŒ90åº¦ã§è¦‹ãˆã‚‹å ´æ‰€ã¯ã©ã“ï¼Ÿ", c: ["åŒ—æ¥µ", "å—æ¥µ", "èµ¤é“", "æ—¥æœ¬"], a: "åŒ—æ¥µ" },
        { q: "å¤©ã®å·ã‚’ã¯ã•ã‚“ã§ãƒ™ã‚¬ï¼ˆã“ã¨åº§ï¼‰ã¨å‘ã‹ã„åˆã†æ˜Ÿã¯ï¼Ÿ", c: ["ã‚¢ãƒ«ã‚¿ã‚¤ãƒ«", "ãƒ‡ãƒãƒ–", "ã‚·ãƒªã‚¦ã‚¹", "ã‚¢ãƒ³ã‚¿ãƒ¬ã‚¹"], a: "ã‚¢ãƒ«ã‚¿ã‚¤ãƒ«" },
        { q: "æ˜¥ã«è¦‹ãˆã‚‹ã€ã¯ã¦ãªï¼ˆï¼Ÿï¼‰ã‚’é€†ã«ã—ãŸå½¢ã®ä¸¦ã³ã¯ä½•åº§ï¼Ÿ", c: ["ã—ã—åº§", "ã‹ã«åº§", "ãŠã¨ã‚åº§", "ã†ã—ã‹ã„åº§"], a: "ã—ã—åº§" },
        { q: "å¤ã®å—ã®ç©ºã«ä½ãè¦‹ãˆã‚‹ã€Så­—ã®å½¢ã®æ˜Ÿåº§ã¯ï¼Ÿ", c: ["ã•ãã‚Šåº§", "ã„ã¦åº§", "å¤©ç§¤åº§", "ã‚ã—åº§"], a: "ã•ãã‚Šåº§" },
        { q: "ç§‹ã®å¤œç©ºã§å¤§ããå››è§’ãä¸¦ã¶ã®ã¯ä½•åº§ï¼Ÿ", c: ["ãƒšã‚¬ã‚¹ã‚¹åº§", "ã‚«ã‚·ã‚ªãƒšãƒ¤åº§", "é­šåº§", "ã‚¯ã‚¸ãƒ©åº§"], a: "ãƒšã‚¬ã‚¹ã‚¹åº§" },
        { q: "å†¬ã®å¤œç©ºã§æœ€ã‚‚ç›®ç«‹ã¤ã€é¼“ï¼ˆã¤ã¥ã¿ï¼‰ã®å½¢ã¯ï¼Ÿ", c: ["ã‚ªãƒªã‚ªãƒ³åº§", "åŒå­åº§", "ç‰¡ç‰›åº§", "å¤§çŠ¬åº§"], a: "ã‚ªãƒªã‚ªãƒ³åº§" },
        { q: "æ˜ŸãŒå‹•ã„ã¦è¦‹ãˆã‚‹ã®ã¯ã€åœ°çƒã®ã€Œä½•ã€ãŒåŸå› ï¼Ÿ", c: ["è‡ªè»¢", "å…¬è»¢", "æ­³å·®", "çˆ†ç™º"], a: "è‡ªè»¢" }
    ];

    let score = 0; let lives = 2; let startTime; let timerInterval; let currentBgm = null;
    let quizQueue = [];

    function checkPassword() {
        if(document.getElementById('input-pass').value === CORRECT_PASSWORD) {
            document.getElementById('password-panel').classList.add('hidden');
            document.getElementById('start-panel').classList.remove('hidden');
        } else { alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™ã€‚"); }
    }

    function initGame() {
        document.getElementById('start-panel').classList.add('hidden');
        document.getElementById('quiz-panel').classList.remove('hidden');
        document.getElementById('global-reset').style.display = 'block';
        const selected = document.getElementById('bgm-select').value;
        if(selected !== 'none') { currentBgm = document.getElementById('audio-' + selected); currentBgm.play(); }
        document.getElementById('audio-wrong').volume = 0.5;
        startTime = Date.now();
        timerInterval = setInterval(() => { document.getElementById('timer').innerText = ((Date.now() - startTime) / 1000).toFixed(1); }, 100);
        score = 0; lives = 2; updateLives();
        quizQueue = [...allQuizData].sort(() => Math.random() - 0.5);
        nextQuestion();
    }

    function updateLives() { document.getElementById('lives-display').innerText = "â¤ï¸".repeat(lives) + "ğŸ–¤".repeat(2-lives); }

    function nextQuestion() {
        if(quizQueue.length === 0) { endGame("ğŸ‰ å…¨50å•ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆï¼å®Œç’§ã ï¼"); return; }
        const item = quizQueue.shift();
        document.getElementById('question').innerText = item.q;
        const container = document.getElementById('choices');
        container.innerHTML = '';
        [...item.c].sort(() => Math.random() - 0.5).forEach(choice => {
            const b = document.createElement('button');
            b.className = 'btn'; b.innerText = choice;
            b.onclick = () => {
                if(choice === item.a) {
                    score += 1; document.getElementById('audio-correct').play();
                    document.getElementById('score').innerText = score;
                    nextQuestion();
                } else {
                    lives--; updateLives();
                    if(lives <= 0) { document.getElementById('audio-gameover').play(); endGame("â˜„ï¸ GAME OVER"); }
                    else { document.getElementById('audio-wrong').play(); nextQuestion(); }
                }
            };
            container.appendChild(b);
        });
    }

    function endGame(msg) {
        clearInterval(timerInterval);
        if(currentBgm) { currentBgm.pause(); currentBgm.currentTime = 0; }
        document.getElementById('quiz-panel').classList.add('hidden');
        document.getElementById('result-panel').classList.remove('hidden');
        document.getElementById('finish-msg').innerText = msg;
        const finalTime = document.getElementById('timer').innerText;
        document.getElementById('final-score').innerText = score;
        document.getElementById('final-time').innerText = finalTime;
        saveScore(document.getElementById('player-name').value || "ãªãªã—", score, finalTime);
    }

    function saveScore(name, scr, time) {
        let ranking = JSON.parse(localStorage.getItem('starRanking') || '[]');
        ranking.push({name: name, score: scr, time: parseFloat(time), date: new Date().toLocaleDateString()});
        ranking.sort((a, b) => b.score - a.score || a.time - b.time);
        ranking = ranking.slice(0, 10);
        localStorage.setItem('starRanking', JSON.stringify(ranking));
        displayRanking(ranking);
    }

    function displayRanking(ranking) {
        const list = document.getElementById('ranking-list');
        list.innerHTML = "ğŸ† æ­´ä»£ãƒˆãƒƒãƒ—10<br>" + 
            ranking.map((d, i) => `${i+1}ä½: ${d.name} ${d.score}ç‚¹ (${d.time}s)`).join('<br>');
    }
</script>
</body>
</html>