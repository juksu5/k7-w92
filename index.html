<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex,nofollow,noarchive">
    <title>STAR MASTER</title>
    <style>
        body {
            margin: 0; padding: 0;
            font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
            background-image: url('image/background.png');
            background-size: cover; background-position: center; background-attachment: fixed;
            color: #fff; display: flex; justify-content: center; align-items: flex-start;
            height: 100vh; overflow: hidden;
        }
        #game-screen {
            background: rgba(0, 5, 30, 0.82); backdrop-filter: blur(8px);
            width: 85%; max-width: 800px; 
            margin-top: 18vh; 
            padding: 30px;
            border: 4px solid #fff; box-shadow: 12px 12px 0px #000;
            text-align: center; position: relative; box-sizing: border-box;
        }
        h1 { font-size: 2.5rem; color: #ffeb3b; margin: 0 0 20px 0; text-shadow: 3px 3px 0px #000; }
        .btn {
            background: #2196F3; color: white; border: 3px solid #fff;
            padding: 15px 10px; margin: 8px; cursor: pointer; font-weight: bold;
            box-shadow: 5px 5px 0px #000; font-size: 22px;
            width: 100%; max-width: 340px; transition: 0.1s;
        }
        .btn:hover { background: #64B5F6; transform: translate(-2px, -2px); box-shadow: 7px 7px 0px #000; }
        .btn:active { transform: translate(2px, 2px); box-shadow: 0px 0px 0px #000; }
        .reset-btn { position: fixed; bottom: 20px; left: 20px; background: #f44336; width: auto; font-size: 14px; display: none; z-index: 100; }
        #status-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; font-size: 1.4rem; color: #00d4ff; border-bottom: 2px solid #334; padding-bottom: 10px; }
        .choices { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 15px; justify-items: center; }
        .hidden { display: none !important; }
        #question { min-height: 90px; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; line-height: 1.4; font-weight: bold; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 10px; }
        input, select { padding: 12px; font-size: 18px; border: none; margin: 10px 0; border-radius: 5px; text-align: center; }
        #ranking-list { text-align: left; background: rgba(0,0,0,0.4); padding: 15px; height: 140px; overflow-y: auto; font-size: 16px; margin-top: 10px; border: 1px solid #445; }
        #lives-display { color: #ff4081; font-size: 1.8rem; }
    </style>
</head>
<body>

<button id="global-reset" class="btn reset-btn" onclick="location.reload()">„Äê„ÅØ„Åò„ÇÅ„Å´„ÇÇ„Å©„Çã„Äë</button>

<div id="game-screen">
    <div id="password-panel">
        <h1>üîê ACCESS</h1>
        <p>„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
        <input type="password" id="input-pass" placeholder="Password"><br>
        <button class="btn" onclick="checkPassword()">ENTER</button>
    </div>

    <div id="start-panel" class="hidden">
        <h1>‚ú® STAR MASTER</h1>
        <input type="text" id="player-name" placeholder="„Å™„Åæ„Åà„Çí„ÅÑ„Çå„Å¶„Å≠" maxlength="10"><br>
        <div style="margin: 10px 0;">
            BGM: <select id="bgm-select"><option value="none">„Å™„Åó</option><option value="bgm1">BGM1</option><option value="bgm2">BGM2</option></select>
        </div>
        <button class="btn" onclick="initGame()">„Ç≤„Éº„É†„Çπ„Çø„Éº„ÉàÔºÅ</button>
    </div>

    <div id="quiz-panel" class="hidden">
        <div id="status-bar">
            <div>‚è± <span id="timer">0.0</span>s</div>
            <div id="lives-display">‚ù§Ô∏è‚ù§Ô∏è</div>
            <div>SCORE: <span id="score">0</span>/50</div>
        </div>
        <div id="question">Loading...</div>
        <div class="choices" id="choices"></div>
    </div>

    <div id="result-panel" class="hidden">
        <h2 id="finish-msg">RESULT</h2>
        <p style="font-size: 1.6rem;">„Çπ„Ç≥„Ç¢: <span id="final-score">0</span>ÁÇπ / „Çø„Ç§„É†: <span id="final-time">0</span>Áßí</p>
        <div id="ranking-list"></div>
        <button class="btn" onclick="location.reload()">„ÇÇ„ÅÜ„ÅÑ„Å°„Å©ÈÅä„Å∂</button>
    </div>
</div>

<audio id="audio-bgm1" src="sound/bgm1.mp3" loop></audio>
<audio id="audio-bgm2" src="sound/bgm2.mp3" loop></audio>
<audio id="audio-correct" src="sound/correct.mp3"></audio>
<audio id="audio-wrong" src="sound/wrong.mp3"></audio>
<audio id="audio-gameover" src="sound/gameover.mp3"></audio>
<audio id="audio-fanfare" src="sound/fanfare.mp3"></audio>

<script>
    const CORRECT_PASSWORD = "103"; 
    const allQuizData = [
        { q: "Â§è„ÅÆÂ§ß‰∏âËßíÔºö„Åì„Å®Â∫ß„ÅÆ1Á≠âÊòü„ÅØÔºü", c: ["„Éô„Ç¨", "„Éá„Éç„Éñ", "„Ç¢„É´„Çø„Ç§„É´", "„Ç¢„É≥„Çø„É¨„Çπ"], a: "„Éô„Ç¨" },
        { q: "Â§è„ÅÆÂ§ß‰∏âËßíÔºö„Çè„ÅóÂ∫ß„ÅÆ1Á≠âÊòü„ÅØÔºü", c: ["„Ç¢„É´„Çø„Ç§„É´", "„Éô„Ç¨", "„Éá„Éç„Éñ", "„Çπ„Éî„Ç´"], a: "„Ç¢„É´„Çø„Ç§„É´" },
        { q: "Â§è„ÅÆÂ§ß‰∏âËßíÔºö„ÅØ„Åè„Å°„Çá„ÅÜÂ∫ß„ÅÆ1Á≠âÊòü„ÅØÔºü", c: ["„Éá„Éç„Éñ", "„Éô„Ç¨", "„Ç¢„É´„Çø„Ç§„É´", "„Ç∑„É™„Ç¶„Çπ"], a: "„Éá„Éç„Éñ" },
        { q: "ÂÜ¨„ÅÆÂ§ß‰∏âËßíÔºö„Åä„Åä„ÅÑ„Å¨Â∫ß„ÅÆ1Á≠âÊòü„ÅØÔºü", c: ["„Ç∑„É™„Ç¶„Çπ", "„Éó„É≠„Ç≠„Ç™„É≥", "„Éô„ÉÜ„É´„ÇÆ„Ç¶„Çπ", "„É™„Ç≤„É´"], a: "„Ç∑„É™„Ç¶„Çπ" },
        { q: "ÂÜ¨„ÅÆÂ§ß‰∏âËßíÔºö„Åì„ÅÑ„Å¨Â∫ß„ÅÆ1Á≠âÊòü„ÅØÔºü", c: ["„Éó„É≠„Ç≠„Ç™„É≥", "„Ç∑„É™„Ç¶„Çπ", "„Éô„ÉÜ„É´„ÇÆ„Ç¶„Çπ", "„Ç´„Éé„Éº„Éó„Çπ"], a: "„Éó„É≠„Ç≠„Ç™„É≥" },
        { q: "ÂÜ¨„ÅÆÂ§ß‰∏âËßíÔºö„Ç™„É™„Ç™„É≥Â∫ß„Å´„ÅÇ„ÇãËµ§„ÅÑÊòü„ÅØÔºü", c: ["„Éô„ÉÜ„É´„ÇÆ„Ç¶„Çπ", "„É™„Ç≤„É´", "„Éó„É≠„Ç≠„Ç™„É≥", "„Ç∑„É™„Ç¶„Çπ"], a: "„Éô„ÉÜ„É´„ÇÆ„Ç¶„Çπ" },
        { q: "„Ç™„É™„Ç™„É≥Â∫ß„Å´„ÅÇ„ÇãÁôΩ„ÅÑÊòüÔºàË∂≥ÂÅ¥Ôºâ„ÅÆÂêçÂâç„ÅØÔºü", c: ["„É™„Ç≤„É´", "„Éô„ÉÜ„É´„ÇÆ„Ç¶„Çπ", "„Éó„É≠„Ç≠„Ç™„É≥", "„Ç∑„É™„Ç¶„Çπ"], a: "„É™„Ç≤„É´" },
        { q: "Êò•„ÅÆÂ§ß‰∏âËßíÔºö„ÅÜ„Åó„Åã„ÅÑÂ∫ß„ÅÆ1Á≠âÊòü„ÅØÔºü", c: ["„Ç¢„Éº„ÇØ„Éà„Ç•„É´„Çπ", "„Çπ„Éî„Ç´", "„Éá„Éç„Éú„É©", "„É¨„Ç∞„É´„Çπ"], a: "„Ç¢„Éº„ÇØ„Éà„Ç•„É´„Çπ" },
        { q: "Êò•„ÅÆÂ§ß‰∏âËßíÔºö„Åä„Å®„ÇÅÂ∫ß„ÅÆ1Á≠âÊòü„ÅØÔºü", c: ["„Çπ„Éî„Ç´", "„Ç¢„Éº„ÇØ„Éà„Ç•„É´„Çπ", "„Éá„Éç„Éú„É©", "„Éó„É≠„Ç≠„Ç™„É≥"], a: "„Çπ„Éî„Ç´" },
        { q: "Êò•„ÅÆÂ§ß‰∏âËßíÔºö„Åó„ÅóÂ∫ß„ÅÆ„Åó„Å£„ÅΩ„Å´„ÅÇ„Çã2Á≠âÊòü„ÅØÔºü", c: ["„Éá„Éç„Éú„É©", "„Çπ„Éî„Ç´", "„Ç¢„Éº„ÇØ„Éà„Ç•„É´„Çπ", "„É¨„Ç∞„É´„Çπ"], a: "„Éá„Éç„Éú„É©" },
        { q: "„Åó„ÅóÂ∫ß„ÅÆËÉ∏„Å´Ëºù„Åè1Á≠âÊòü„ÅØÔºü", c: ["„É¨„Ç∞„É´„Çπ", "„Çπ„Éî„Ç´", "„Ç¢„Éº„ÇØ„Éà„Ç•„É´„Çπ", "„Éá„Éç„Éú„É©"], a: "„É¨„Ç∞„É´„Çπ" },
        { q: "ÂåóÊ•µÊòü„ÅØ‰ΩïÂ∫ß„Å´Âê´„Åæ„Çå„ÇãÊòüÔºü", c: ["„Åì„Åê„ÅæÂ∫ß", "„Åä„Åä„Åê„ÅæÂ∫ß", "„Ç´„Ç∑„Ç™„Éö„É§Â∫ß", "„Ç±„Éï„Çß„Ç¶„ÇπÂ∫ß"], a: "„Åì„Åê„ÅæÂ∫ß" },
        { q: "ÂåóÊñó‰∏ÉÊòü„ÅØ‰ΩïÂ∫ß„ÅÆ‰∏ÄÈÉ®Ôºü", c: ["„Åä„Åä„Åê„ÅæÂ∫ß", "„Åì„Åê„ÅæÂ∫ß", "„Ç´„Ç∑„Ç™„Éö„É§Â∫ß", "„Åó„ÅóÂ∫ß"], a: "„Åä„Åä„Åê„ÅæÂ∫ß" },
        { q: "„Ç´„Ç∑„Ç™„Éö„É§Â∫ß„ÅØ„Å©„Çì„Å™ÂΩ¢„ÅÆ‰∏¶„Å≥Ôºü", c: ["W„ÅÆÂΩ¢", "M„ÅÆÂΩ¢", "S„ÅÆÂΩ¢", "L„ÅÆÂΩ¢"], a: "W„ÅÆÂΩ¢" },
        { q: "ÂåóÊ•µÊòü„ÅØ1Êó•„Å´‰ΩïÂ∫¶Âãï„ÅÑ„Å¶Ë¶ã„Åà„ÇãÔºü", c: ["„Åª„Å®„Çì„Å©Âãï„Åã„Å™„ÅÑ", "15Â∫¶", "30Â∫¶", "360Â∫¶"], a: "„Åª„Å®„Çì„Å©Âãï„Åã„Å™„ÅÑ" },
        { q: "„Åï„Åù„ÇäÂ∫ß„Å´„ÅÇ„ÇãËµ§„ÅÑ1Á≠âÊòü„ÅØÔºü", c: ["„Ç¢„É≥„Çø„É¨„Çπ", "„Éô„ÉÜ„É´„ÇÆ„Ç¶„Çπ", "ÁÅ´Êòü", "„Ç¢„É´„Éá„Éê„É©„É≥"], a: "„Ç¢„É≥„Çø„É¨„Çπ" },
        { q: "„ÄåÁßã„ÅÆÂõõËæ∫ÂΩ¢„Äç„Åå„ÅÇ„Çã„ÅÆ„ÅØ‰Ωï„ÅÆÊòüÂ∫ßÔºü", c: ["„Éö„Ç¨„Çπ„ÇπÂ∫ß", "„Ç¢„É≥„Éâ„É≠„É°„ÉÄÂ∫ß", "„Åø„Åö„Åå„ÇÅÂ∫ß", "„ÅÜ„ÅäÂ∫ß"], a: "„Éö„Ç¨„Çπ„ÇπÂ∫ß" },
        { q: "„Åä„ÅÜ„ÅóÂ∫ß„Å´„ÅÇ„ÇãËµ§„ÅÑ1Á≠âÊòü„ÅÆÂêçÂâç„ÅØÔºü", c: ["„Ç¢„É´„Éá„Éê„É©„É≥", "„Ç¢„É≥„Çø„É¨„Çπ", "„Ç∑„É™„Ç¶„Çπ", "„Çπ„Éî„Ç´"], a: "„Ç¢„É´„Éá„Éê„É©„É≥" },
        { q: "Â§™ÈôΩ„ÇíÈô§„ÅÑ„Å¶„ÄÅÂÖ®Â§©„ÅßÊúÄ„ÇÇÊòé„Çã„ÅÑÊÅíÊòü„ÅØÔºü", c: ["„Ç∑„É™„Ç¶„Çπ", "ÂåóÊ•µÊòü", "„Éô„Ç¨", "„É™„Ç≤„É´"], a: "„Ç∑„É™„Ç¶„Çπ" },
        { q: "„Åø„Å™„Åø„ÅÆ„ÅÜ„ÅäÂ∫ß„ÅÆ1Á≠âÊòüÔºàÁßã„ÅÆ„Å≤„Å®„Å§ÊòüÔºâ„ÅØÔºü", c: ["„Éï„Ç©„Éº„Éû„É´„Éè„Ç¶„Éà", "„Ç¢„É≥„Çø„É¨„Çπ", "„Ç´„Éé„Éº„Éó„Çπ", "„Éô„Ç¨"], a: "„Éï„Ç©„Éº„Éû„É´„Éè„Ç¶„Éà" },
        { q: "Êòü„ÅØ1ÊôÇÈñì„Å´‰ΩïÂ∫¶Âãï„ÅÑ„Å¶Ë¶ã„Åà„ÇãÔºü", c: ["15Â∫¶", "1Â∫¶", "30Â∫¶", "45Â∫¶"], a: "15Â∫¶" },
        { q: "Êòü„ÅØ1„É∂Êúà„Å´‰ΩïÂ∫¶ÔºàÂêå„ÅòÊôÇÂàª„Å´ÔºâÂãï„ÅÑ„Å¶Ë¶ã„Åà„ÇãÔºü", c: ["30Â∫¶", "15Â∫¶", "1Â∫¶", "90Â∫¶"], a: "30Â∫¶" },
        { q: "Ë°®Èù¢Ê∏©Â∫¶„ÅåÊúÄ„ÇÇÈ´ò„ÅÑÊòü„ÅÆËâ≤„ÅØÔºü", c: ["ÈùíÁôΩ", "ÁôΩ", "ÈªÑ", "Ëµ§"], a: "ÈùíÁôΩ" },
        { q: "Ë°®Èù¢Ê∏©Â∫¶„ÅåÊúÄ„ÇÇ‰Ωé„ÅÑÊòü„ÅÆËâ≤„ÅØÔºü", c: ["Ëµ§", "ÈªÑ", "ÁôΩ", "ÈùíÁôΩ"], a: "Ëµ§" },
        { q: "Â§™ÈôΩ„ÅÆË°®Èù¢Ê∏©Â∫¶„ÅØÁ¥Ñ‰ΩïÂ∫¶Ôºü", c: ["6000Â∫¶", "100‰∏áÂ∫¶", "1500Â∫¶", "1500‰∏áÂ∫¶"], a: "6000Â∫¶" },
        { q: "Âú∞ÁêÉ„ÅÆËá™Ëª¢„ÅÆÂêë„Åç„ÅØ„Å©„Å£„Å°„Åã„Çâ„Å©„Å£„Å°Ôºü", c: ["Ë•ø„Åã„ÇâÊù±", "Êù±„Åã„ÇâË•ø", "Âåó„Åã„ÇâÂçó", "Âçó„Åã„ÇâÂåó"], a: "Ë•ø„Åã„ÇâÊù±" },
        { q: "Ë¶≥Ê∏¨Âú∞„ÅÆÂåóÁ∑Ø„Å®„ÄÅ„Åù„ÅÆÂ†¥ÊâÄ„Åã„ÇâË¶ã„ÅüÂåóÊ•µÊòü„ÅÆ‰Ωï„ÅåÁ≠â„Åó„ÅÑÔºü", c: ["È´òÂ∫¶", "Êñπ‰Ωç", "Êòé„Çã„Åï", "Âçó‰∏≠ÊôÇÂàª"], a: "È´òÂ∫¶" },
        { q: "ÂåóÂçäÁêÉ„Åß„ÄÅÂçó„ÅÆÁ©∫„ÅÆÊòü„ÅØ„Å©„Å£„Å°„Åã„Çâ„Å©„Å£„Å°„Å´Âãï„ÅèÔºü", c: ["Êù±„Åã„ÇâË•ø", "Ë•ø„Åã„ÇâÊù±", "Âåó„Åã„ÇâÂçó", "Áúü‰∏ä„Å∏"], a: "Êù±„Åã„ÇâË•ø" },
        { q: "ÂÜ¨„ÅÆÂ§úÁ©∫„ÅßË¶ã„Åà„ÇãÈùíÁôΩ„ÅÑ1Á≠âÊòüÔºà„Ç™„É™„Ç™„É≥Â∫ßÔºâ„ÅØÔºü", c: ["„É™„Ç≤„É´", "„Éô„ÉÜ„É´„ÇÆ„Ç¶„Çπ", "„Ç¢„É≥„Çø„É¨„Çπ", "„Ç¢„É´„Éá„Éê„É©„É≥"], a: "„É™„Ç≤„É´" },
        { q: "„Ç™„É™„Ç™„É≥Â∫ß„ÅÆÁúü„Çì‰∏≠„Å´‰∏¶„Å∂‰∏â„Å§Êòü„ÅØ„ÅÑ„Åè„Å§Ôºü", c: ["3„Å§", "5„Å§", "7„Å§", "2„Å§"], a: "3„Å§" },
        { q: "ÂåóÊñó‰∏ÉÊòü„Åã„ÇâÂåóÊ•µÊòü„ÇíÊé¢„Åô„Å®„Åç„ÄÅÂÖàÁ´Ø„ÅÆÂπÖ„ÅÆ‰ΩïÂÄç‰º∏„Å∞„ÅôÔºü", c: ["5ÂÄç", "3ÂÄç", "10ÂÄç", "7ÂÄç"], a: "5ÂÄç" },
        { q: "‰∫åÂçÅÂõõÁØÄÊ∞ó„Åß„ÄÅÊòº„ÅåÊúÄ„ÇÇÈï∑„ÅÑÊó•„ÅØÔºü", c: ["Â§èËá≥", "ÂÜ¨Ëá≥", "Êò•ÂàÜ", "ÁßãÂàÜ"], a: "Â§èËá≥" },
        { q: "Â§è„ÅÆÂ§ß‰∏âËßí„ÇíÊßãÊàê„Åô„ÇãÊòüÂ∫ß„Åß„ÅØ„Å™„ÅÑ„ÅÆ„ÅØÔºü", c: ["„Åï„Åù„ÇäÂ∫ß", "„Åì„Å®Â∫ß", "„Çè„ÅóÂ∫ß", "„ÅØ„Åè„Å°„Çá„ÅÜÂ∫ß"], a: "„Åï„Åù„ÇäÂ∫ß" },
        { q: "1Á≠âÊòü„Çà„Çä„ÇÇÊòé„Çã„ÅÑÊòü„ÅÆÁ≠âÁ¥ö„ÅØÔºü", c: ["0Á≠âÊòü", "2Á≠âÊòü", "6Á≠âÊòü", "„Éû„Ç§„Éä„Çπ"], a: "0Á≠âÊòü" },
        { q: "ËÇâÁúº„ÅßË¶ã„Åà„ÇãÊúÄ„ÇÇÊöó„ÅÑÊòü„ÅØ‰ΩïÁ≠âÊòüÔºü", c: ["6Á≠âÊòü", "1Á≠âÊòü", "10Á≠âÊòü", "3Á≠âÊòü"], a: "6Á≠âÊòü" },
        { q: "Á≠âÁ¥ö„Åå1„Å§‰∏ä„Åå„Çã„Å®„ÄÅÊòé„Çã„Åï„ÅØÁ¥Ñ‰ΩïÂÄç„Å´„Å™„ÇãÔºü", c: ["2.5ÂÄç", "10ÂÄç", "100ÂÄç", "5ÂÄç"], a: "2.5ÂÄç" },
        { q: "Á≠âÁ¥ö„Åå5„Å§ÈÅï„ÅÜ„Å®„ÄÅÊòé„Çã„Åï„ÅØ‰ΩïÂÄçÈÅï„ÅÜÔºü", c: ["100ÂÄç", "50ÂÄç", "10ÂÄç", "5ÂÄç"], a: "100ÂÄç" },
        { q: "Â§™ÈôΩ„ÅåÁúüÂçó„Å´„Åè„Çã„Åì„Å®„Çí‰Ωï„Å®„ÅÑ„ÅÜÔºü", c: ["Âçó‰∏≠", "Âåó‰∏ä", "Êó•„ÅÆÂá∫", "Êó•Ê≤°"], a: "Âçó‰∏≠" },
        { q: "1Âπ¥‰∏≠Âú∞Âπ≥Á∑ö„ÅÆ‰∏ã„Å´Ê≤à„Åæ„Å™„ÅÑÊòü„Çí‰Ωï„Å®„ÅÑ„ÅÜÔºü", c: ["Âë®Ê•µÊòü", "ÊÅíÊòü", "ÊÉëÊòü", "ÂΩóÊòü"], a: "Âë®Ê•µÊòü" },
        { q: "Â§©ÁêÉ‰∏ä„ÅßÂ§™ÈôΩ„Åå1Âπ¥„Åã„Åë„Å¶ÈÄö„ÇãÈÅì„ÅÆÂêçÂâç„ÅØÔºü", c: ["ÈªÑÈÅì", "Ëµ§ÈÅì", "ÁôΩÈÅì", "ÈäÄÊ≤≥"], a: "ÈªÑÈÅì" },
        { q: "ÈªÑÈÅì12ÊòüÂ∫ß„Å´Âê´„Åæ„Çå„Å™„ÅÑÊòüÂ∫ß„ÅØÔºü", c: ["„Ç™„É™„Ç™„É≥Â∫ß", "„Åä„Å≤„Å§„ÅòÂ∫ß", "„Åó„ÅóÂ∫ß", "„Åï„Åù„ÇäÂ∫ß"], a: "„Ç™„É™„Ç™„É≥Â∫ß" },
        { q: "‰∏ÉÂ§ï„ÅÆ„ÄåÁπîÂß´Ôºà„Åä„Çä„Å≤„ÇÅÔºâ„Äç„Å´„ÅÇ„Åü„ÇãÊòü„ÅØÔºü", c: ["„Éô„Ç¨", "„Ç¢„É´„Çø„Ç§„É´", "„Éá„Éç„Éñ", "„Çπ„Éî„Ç´"], a: "„Éô„Ç¨" },
        { q: "‰∏ÉÂ§ï„ÅÆ„ÄåÂΩ¶ÊòüÔºà„Å≤„Åì„Åº„ÅóÔºâ„Äç„Å´„ÅÇ„Åü„ÇãÊòü„ÅØÔºü", c: ["„Ç¢„É´„Çø„Ç§„É´", "„Éô„Ç¨", "„Éá„Éç„Éñ", "„Çπ„Éî„Ç´"], a: "„Ç¢„É´„Çø„Ç§„É´" },
        { q: "ÂåóÊ•µÊòü„ÅÆÈ´òÂ∫¶„Åå90Â∫¶„ÅßË¶ã„Åà„ÇãÂ†¥ÊâÄ„ÅØ„Å©„ÅìÔºü", c: ["ÂåóÊ•µ", "ÂçóÊ•µ", "Ëµ§ÈÅì", "Êó•Êú¨"], a: "ÂåóÊ•µ" },
        { q: "Â§©„ÅÆÂ∑ù„Çí„ÅØ„Åï„Çì„Åß„Éô„Ç¨Ôºà„Åì„Å®Â∫ßÔºâ„Å®Âêë„Åã„ÅÑÂêà„ÅÜÊòü„ÅØÔºü", c: ["„Ç¢„É´„Çø„Ç§„É´", "„Éá„Éç„Éñ", "„Ç∑„É™„Ç¶„Çπ", "„Ç¢„É≥„Çø„É¨„Çπ"], a: "„Ç¢„É´„Çø„Ç§„É´" },
        { q: "Êò•„Å´Ë¶ã„Åà„Çã„ÄÅ„ÅØ„Å¶„Å™ÔºàÔºüÔºâ„ÇíÈÄÜ„Å´„Åó„ÅüÂΩ¢„ÅÆ‰∏¶„Å≥„ÅØ‰ΩïÂ∫ßÔºü", c: ["„Åó„ÅóÂ∫ß", "„Åã„Å´Â∫ß", "„Åä„Å®„ÇÅÂ∫ß", "„ÅÜ„Åó„Åã„ÅÑÂ∫ß"], a: "„Åó„ÅóÂ∫ß" },
        { q: "Â§è„ÅÆÂçó„ÅÆÁ©∫„Å´‰Ωé„ÅèË¶ã„Åà„Çã„ÄÅSÂ≠ó„ÅÆÂΩ¢„ÅÆÊòüÂ∫ß„ÅØÔºü", c: ["„Åï„Åù„ÇäÂ∫ß", "„ÅÑ„Å¶Â∫ß", "Â§©Áß§Â∫ß", "„Çè„ÅóÂ∫ß"], a: "„Åï„Åù„ÇäÂ∫ß" },
        { q: "Áßã„ÅÆÂ§úÁ©∫„ÅßÂ§ß„Åç„ÅèÂõõËßí„Åè‰∏¶„Å∂„ÅÆ„ÅØ‰ΩïÂ∫ßÔºü", c: ["„Éö„Ç¨„Çπ„ÇπÂ∫ß", "„Ç´„Ç∑„Ç™„Éö„É§Â∫ß", "È≠öÂ∫ß", "„ÇØ„Ç∏„É©Â∫ß"], a: "„Éö„Ç¨„Çπ„ÇπÂ∫ß" },
        { q: "ÂÜ¨„ÅÆÂ§úÁ©∫„ÅßÊúÄ„ÇÇÁõÆÁ´ã„Å§„ÄÅÈºìÔºà„Å§„Å•„ÅøÔºâ„ÅÆÂΩ¢„ÅØÔºü", c: ["„Ç™„É™„Ç™„É≥Â∫ß", "ÂèåÂ≠êÂ∫ß", "Áâ°ÁâõÂ∫ß", "Â§ßÁä¨Â∫ß"], a: "„Ç™„É™„Ç™„É≥Â∫ß" },
        { q: "Êòü„ÅåÂãï„ÅÑ„Å¶Ë¶ã„Åà„Çã„ÅÆ„ÅØ„ÄÅÂú∞ÁêÉ„ÅÆ„Äå‰Ωï„Äç„ÅåÂéüÂõ†Ôºü", c: ["Ëá™Ëª¢", "ÂÖ¨Ëª¢", "Ê≠≥Â∑Æ", "ÁàÜÁô∫"], a: "Ëá™Ëª¢" }
    ];

    let score = 0; let lives = 2; let startTime; let timerInterval; let currentBgm = null;
    let quizQueue = [];

    function checkPassword() {
        if(document.getElementById('input-pass').value === CORRECT_PASSWORD) {
            document.getElementById('password-panel').classList.add('hidden');
            document.getElementById('start-panel').classList.remove('hidden');
        } else { alert("„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÈÅï„ÅÑ„Åæ„Åô„ÄÇ"); }
    }

    function initGame() {
        document.getElementById('start-panel').classList.add('hidden');
        document.getElementById('quiz-panel').classList.remove('hidden');
        document.getElementById('global-reset').style.display = 'block';
        const selected = document.getElementById('bgm-select').value;
        if(selected !== 'none') { currentBgm = document.getElementById('audio-' + selected); currentBgm.play(); }
        document.getElementById('audio-wrong').volume = 0.5;
        startTime = Date.now();
        timerInterval = setInterval(() => { 
            document.getElementById('timer').innerText = ((Date.now() - startTime) / 1000).toFixed(1); 
        }, 100);
        score = 0; lives = 2; updateLives();
        quizQueue = [...allQuizData].sort(() => Math.random() - 0.5);
        nextQuestion();
    }

    function updateLives() { document.getElementById('lives-display').innerText = "‚ù§Ô∏è".repeat(lives) + "üñ§".repeat(2-lives); }

    function nextQuestion() {
        const item = quizQueue.shift();
        
        // ÂïèÈ°åÊñá„ÇíË°®Á§∫
        document.getElementById('question').innerText = item.q;
        const container = document.getElementById('choices');
        container.innerHTML = '';
        
        [...item.c].sort(() => Math.random() - 0.5).forEach(choice => {
            const b = document.createElement('button');
            b.className = 'btn'; b.innerText = choice;
            b.onclick = () => {
                // „ÄêË∂ÖÈáçË¶Å„Äë„Éú„Çø„É≥„ÅåÊäº„Åï„Çå„ÅüÂæå„ÅÆÂá¶ÁêÜ
                if(choice === item.a) {
                    score++; // „Çπ„Ç≥„Ç¢„ÇíÂÖà„Å´Â¢ó„ÇÑ„Åô
                    document.getElementById('audio-correct').play();
                    document.getElementById('score').innerText = score;
                } else {
                    lives--;
                    updateLives();
                    if(lives <= 0) { 
                        document.getElementById('audio-gameover').play(); 
                        endGame("‚òÑÔ∏è GAME OVER"); 
                        return; // „É©„Ç§„Éï0„Å™„ÇâÂç≥ÁµÇ‰∫Ü
                    }
                    document.getElementById('audio-wrong').play();
                }

                // „Äê‰øÆÊ≠£„ÄëÊ¨°„ÅÆÂïèÈ°å„Åå„ÅÇ„Çã„Åã„ÄÅ„Åì„Åì„ÅßÂàù„ÇÅ„Å¶Âà§ÂÆö„Åô„Çã
                if (quizQueue.length > 0) {
                    nextQuestion();
                } else {
                    // ÊúÄÂæå„ÅÆ1Âïè„Å†„Å£„ÅüÂ†¥Âêà
                    setTimeout(() => { endGame("üéâ ÂÖ®50Âïè„Ç≥„É≥„Éó„É™„Éº„ÉàÔºÅ"); }, 500);
                }
            };
            container.appendChild(b);
        });
    }

    function endGame(msg) {
        clearInterval(timerInterval);
        if(currentBgm) { currentBgm.pause(); currentBgm.currentTime = 0; }
        
        document.getElementById('quiz-panel').classList.add('hidden');
        document.getElementById('result-panel').classList.remove('hidden');
        
        const finalTime = document.getElementById('timer').innerText;
        document.getElementById('final-score').innerText = score;
        document.getElementById('final-time').innerText = finalTime;
        
        // Âà§ÂÆö„Çí 50ÁÇπ‰ª•‰∏äÔºàNumber„ÅßÁ¢∫ÂÆü„Å´Êï∞ÂÄ§ÂåñÔºâ„Å´Âõ∫ÂÆö
        if (parseInt(score) >= 50) {
            document.getElementById('audio-fanfare').play();
            document.getElementById('finish-msg').innerText = "üèÜ PERFECT!!! " + msg;
            document.getElementById('finish-msg').style.color = "#ffeb3b";
        } else {
            document.getElementById('finish-msg').innerText = msg;
            document.getElementById('finish-msg').style.color = "#fff";
        }
        saveScore(document.getElementById('player-name').value || "„Å™„Å™„Åó", score, finalTime);
    }

    function saveScore(name, scr, time) {
        let ranking = JSON.parse(localStorage.getItem('starRanking') || '[]');
        ranking.push({name: name, score: scr, time: parseFloat(time), date: new Date().toLocaleDateString()});
        ranking.sort((a, b) => b.score - a.score || a.time - b.time);
        ranking = ranking.slice(0, 10);
        localStorage.setItem('starRanking', JSON.stringify(ranking));
        displayRanking(ranking);
    }

    function displayRanking(ranking) {
        const list = document.getElementById('ranking-list');
        list.innerHTML = "üèÜ Ê≠¥‰ª£„Éà„ÉÉ„Éó10<br>" + 
            ranking.map((d, i) => `${i+1}‰Ωç: ${d.name} ${d.score}ÁÇπ (${d.time}s)`).join('<br>');
    }
</script>
</body>
</html>